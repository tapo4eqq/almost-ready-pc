<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Корзина - IntelligentPC</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Анимированный фон -->
    <div class="matrix-bg"></div>
    
    <!-- Хедер с голографическим эффектом -->
    <header class="holographic">
        <div class="header-container">
            <div class="logo" data-text="IntelligentPC">
                <a href="index.html" class="glow">IntelligentPC</a>
                <div class="hologram-effect"></div>
            </div>
            
            <div class="header-right">
                <div class="contact-info pulse">
                    <i class="fas fa-phone-alt"></i> 
                    <span class="neon-text">+7 (962) 910-91-44</span>
                </div>
                
                <!-- Навигация с иконками -->
                <nav class="cyber-nav">
                    <a href="support.html" class="nav-btn">
                        <i class="fas fa-headset"></i>
                        <span>Поддержка</span>
                    </a>
                    <a href="servers.html" class="nav-btn">
                        <i class="fas fa-server"></i>
                        <span>Серверы</span>
                    </a>
                    <a href="services.html" class="nav-btn">
                        <i class="fas fa-cogs"></i>
                        <span>Услуги</span>
                    </a>
                    <a href="cart.html" class="nav-btn cart-link active">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Корзина</span>
                        <span class="cart-counter">0</span>
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <div class="cart-container" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
            <h1 class="cart-title neon-text">ЦИФРОВАЯ КОРЗИНА</h1>
            
            <div class="cart-content glass-panel">
                <div class="cart-items-header">
                    <div class="header-item">ТОВАР</div>
                    <div class="header-item">ЦЕНА</div>
                    <div class="header-item">КОЛИЧЕСТВО</div>
                    <div class="header-item">ИТОГО</div>
                    <div class="header-item"></div>
                </div>
                
                <div class="cart-items-list" id="cart-items-container">
                    <!-- Товары будут добавляться динамически -->
                </div>
                
                <div class="cart-empty" id="empty-cart-message" style="display: none;">
                    <i class="fas fa-microchip"></i>
                    <p>ВАША КОРЗИНА ПУСТА</p>
                    <a href="config.html" class="cyber-button">
                        <i class="fas fa-arrow-left"></i>
                        <span>В КОНФИГУРАТОР</span>
                    </a>
                </div>
            </div>
            
            <div class="cart-summary glass-panel">
                <h2 class="summary-title">СУММА ЗАКАЗА</h2>
                
                <div class="summary-details">
                    <div class="detail-row">
                        <span>Промежуточный итог:</span>
                        <span class="subtotal">0 ₽</span>
                    </div>
                    <div class="detail-row">
                        <span>Доставка:</span>
                        <span class="shipping">Бесплатно</span>
                    </div>
                    <div class="detail-row total">
                        <span>ИТОГО:</span>
                        <span class="grand-total">0 ₽</span>
                    </div>
                </div>
                
                <div class="coupon-section">
                    <input type="text" placeholder="ПРОМОКОД" class="coupon-input">
                    <button class="coupon-btn cyber-button small">
                        <span>ПРИМЕНИТЬ</span>
                    </button>
                </div>
                
                <div class="checkout-buttons">
                    <button class="clear-cart cyber-button danger" id="clear-cart-btn">
                        <i class="fas fa-trash"></i>
                        <span>ОЧИСТИТЬ КОРЗИНУ</span>
                    </button>
                    <button class="checkout cyber-button" id="checkout-btn">
                        <i class="fas fa-lock"></i>
                        <span>ОФОРМИТЬ ЗАКАЗ</span>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Футер с технологичным дизайном -->
    <footer class="cyber-footer">
        <div class="footer-grid">
            <div class="footer-section">
                <h3>КОНТАКТЫ</h3>
                <div class="footer-contact">
                    <i class="fas fa-phone-alt"></i>
                    <span>+7 (962) 910-91-44</span>
                </div>
                <div class="footer-contact">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Москва, Ленинский пр-т 45</span>
                </div>
                <div class="footer-contact">
                    <i class="fas fa-clock"></i>
                    <span>24/7 доступ</span>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>НАВИГАЦИЯ</h3>
                <ul class="footer-nav">
                    <li><a href="index.html">Главная</a></li>
                    <li><a href="config.html">Конфигуратор</a></li>
                    <li><a href="servers.html">Серверы</a></li>
                    <li><a href="services.html">Услуги</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>ТЕХНОЛОГИИ</h3>
                <div class="tech-tags">
                    <span>AI</span>
                    <span>Quantum</span>
                    <span>Neural</span>
                    <span>VR-ready</span>
                    <span>Blockchain</span>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>СОЦСЕТИ</h3>
                <div class="social-grid">
                    <a href="#" class="social-icon"><i class="fab fa-vk"></i></a>
                    <a href="https://t.me/magnoliagod" class="social-icon"><i class="fab fa-telegram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-github"></i></a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="copyright">
                <span>© 2025 INTELLIGENTPC | QUANTUM COMPUTING DIVISION</span>
                <span id="counter">VISITORS: 0</span>
            </div>
            <div class="footer-code">
                <span>SYSTEM STATUS: <span class="online">ONLINE</span></span>
                <span>VERSION: 3.1.4</span>
            </div>
        </div>
    </footer>

    <script>
        // Счетчик посещений
        let visitCount = localStorage.getItem('visitCount') || 0;
        visitCount++;
        localStorage.setItem('visitCount', visitCount);
        document.getElementById('counter').textContent = `VISITORS: ${visitCount}`;
        
        // Функция для обновления счетчика корзины в хедере
        function updateCartCounter() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.querySelector('.cart-counter').textContent = totalItems;
        }

        // Функция для отображения товаров в корзине
        function renderCartItems() {
            const cartContainer = document.getElementById('cart-items-container');
            const emptyMessage = document.getElementById('empty-cart-message');
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            if (cart.length === 0) {
                cartContainer.style.display = 'none';
                emptyMessage.style.display = 'flex';
            } else {
                cartContainer.style.display = '';
                emptyMessage.style.display = 'none';
                
                // Очищаем контейнер перед добавлением новых элементов
                cartContainer.innerHTML = '';
                
                // Добавляем каждый товар в корзину
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <div class="item-product">
                            <div class="product-image">
                                <img src="${item.image}" alt="${item.name}">
                            </div>
                            <div class="product-info">
                                <h3>${item.name}</h3>
                                <p class="product-code">${item.code}</p>
                                <div class="product-tech">
                                    ${item.specs.map(spec => `<span>${spec}</span>`).join('')}
                                </div>
                            </div>
                        </div>
                        <div class="item-price">
                            <span class="price-value">${item.price.toLocaleString('ru-RU')} ₽</span>
                        </div>
                        <div class="item-quantity">
                            <button class="quantity-btn minus"><i class="fas fa-minus"></i></button>
                            <input type="number" value="${item.quantity}" min="1" class="quantity-input">
                            <button class="quantity-btn plus"><i class="fas fa-plus"></i></button>
                        </div>
                        <div class="item-total">
                            <span class="total-value">${(item.price * item.quantity).toLocaleString('ru-RU')} ₽</span>
                        </div>
                        <div class="item-remove">
                            <button class="remove-btn"><i class="fas fa-trash"></i></button>
                        </div>
                    `;
                    cartContainer.appendChild(cartItem);
                });
            }
            
            updateCartTotals();
        }
        
        // Функция обновления итоговой суммы
        function updateCartTotals() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            let subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            document.querySelector('.subtotal').textContent = 
                subtotal.toLocaleString('ru-RU') + ' ₽';
            document.querySelector('.grand-total').textContent = 
                subtotal.toLocaleString('ru-RU') + ' ₽';
            
            updateCartCounter();
        }
        
        // Обработчики событий
        document.addEventListener('DOMContentLoaded', function() {
            // Загружаем корзину при загрузке страницы
            renderCartItems();
            
            // Делегирование событий для динамически созданных элементов
            document.getElementById('cart-items-container').addEventListener('click', function(e) {
                const target = e.target.closest('.quantity-btn') || e.target.closest('.remove-btn');
                if (!target) return;
                
                const cartItem = target.closest('.cart-item');
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const itemIndex = Array.from(cartItem.parentElement.children).indexOf(cartItem);
                
                if (target.classList.contains('remove-btn')) {
                    // Удаление товара
                    cart.splice(itemIndex, 1);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    
                    cartItem.classList.add('removing');
                    setTimeout(() => {
                        renderCartItems();
                    }, 300);
                } else if (target.classList.contains('quantity-btn')) {
                    // Изменение количества
                    const input = cartItem.querySelector('.quantity-input');
                    let value = parseInt(input.value);
                    
                    if (target.classList.contains('minus') && value > 1) {
                        input.value = value - 1;
                    } else if (target.classList.contains('plus')) {
                        input.value = value + 1;
                    }
                    
                    cart[itemIndex].quantity = parseInt(input.value);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartItem(cartItem);
                }
            });
            
            // Обработчик изменения количества через input
            document.getElementById('cart-items-container').addEventListener('change', function(e) {
                if (e.target.classList.contains('quantity-input')) {
                    if (e.target.value < 1) e.target.value = 1;
                    
                    const cartItem = e.target.closest('.cart-item');
                    const cart = JSON.parse(localStorage.getItem('cart')) || [];
                    const itemIndex = Array.from(cartItem.parentElement.children).indexOf(cartItem);
                    
                    cart[itemIndex].quantity = parseInt(e.target.value);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartItem(cartItem);
                }
            });
            
            // Очистка корзины
            document.getElementById('clear-cart-btn').addEventListener('click', function() {
                localStorage.removeItem('cart');
                renderCartItems();
            });
            
            // Оформление заказа
            document.getElementById('checkout-btn').addEventListener('click', function() {
                alert('Заказ оформлен!');
                localStorage.removeItem('cart');
                renderCartItems();
            });
        });
        
        // Функция обновления стоимости отдельного товара
        function updateCartItem(item) {
            const price = parseInt(item.querySelector('.price-value').textContent.replace(/\D/g, ''));
            const quantity = parseInt(item.querySelector('.quantity-input').value);
            const total = price * quantity;
            
            item.querySelector('.total-value').textContent = 
                total.toLocaleString('ru-RU') + ' ₽';
            
            updateCartTotals();
        }
    </script>
    <script src="app.js"></script>
</body>
</html>